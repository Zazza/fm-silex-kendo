/*
* Kendo UI Web v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function r(e){return e.children("div").find(":checkbox:first")}function i(t){var n,r,i=t.children("div"),a=t.children("ul"),s=i.children(".k-icon"),o=t.children(":checkbox"),d=i.children(".k-in");if(!t.hasClass("k-treeview")&&(i.length||(i=e("<div />").prependTo(t)),!s.length&&a.length?s=e("<span class='k-icon' />").prependTo(i):a.length&&a.children().length||(s.remove(),a.remove()),o.length&&e("<span class='k-checkbox' />").appendTo(i).append(o),!d.length))for(d=e("<span class='k-in' />").appendTo(i)[0],n=i[0].nextSibling,d=i.find(".k-in")[0];n&&"ul"!=n.nodeName.toLowerCase();)r=n,n=n.nextSibling,3==r.nodeType&&(r.nodeValue=e.trim(r.nodeValue)),d.appendChild(r)}function a(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new u.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({text:t.text()})},cursorOffset:{left:10,top:c.support.touch?-40/c.support.zoomLevel():10},dragstart:k(t.dragstart,t),dragcancel:k(t.dragcancel,t),drag:k(t.drag,t),dragend:k(t.dragend,t)})}var s,o,d,l,c=window.kendo,u=c.ui,p=c.data,h=e.extend,f=c.template,g=e.isArray,m=u.Widget,v=p.HierarchicalDataSource,k=e.proxy,_=c.keys,x=".kendoTreeView",b="select",C="navigate",w="expand",y="change",T="checked",S="collapse",N="dragstart",A="drag",B="drop",I="dragend",U="dataBound",H="click",D="visibility",V="undefined",L="k-state-hover",O="k-treeview",E=":visible",M=".k-item",j="aria-selected",F="aria-disabled",q={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},G=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName};o=n(".k-group"),d=n(".k-group,.k-content"),l=function(e){return e.children("div").children(".k-icon")},s=m.extend({init:function(t,n){var r,i=this,s=!1;g(n)&&(r=!0,n={dataSource:n}),n&&typeof n.loadOnDemand==V&&g(n.dataSource)&&(n.loadOnDemand=!1),m.prototype.init.call(i,t,n),t=i.element,n=i.options,s=t.is("ul")||t.hasClass(O),s&&(n.dataSource.list=t.is("ul")?t:t.children("ul")),i._animation(),i._accessors(),i._templates(),t.hasClass(O)?(i.wrapper=t,i.root=t.children("ul").eq(0)):(i._wrapper(),s&&(i.root=t,i._group(i.wrapper))),i._tabindex(),i.wrapper.filter("[role=tree]").length||i.wrapper.attr("role","tree"),i._dataSource(s),i._attachEvents(),n.dragAndDrop&&(i.dragging=new a(i)),s?i._attachUids():n.autoBind&&(i._progress(!0),i.dataSource.fetch()),n.checkboxes&&n.checkboxes.checkChildren&&i.wrapper.find(":checkbox").closest(M).each(function(){i._updateIndeterminate(e(this))}),i.element[0].id&&(i._ariaId=c.format("{0}_tv_active",i.element[0].id))},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",r="mouseenter";t.wrapper.on(r+x,".k-in.k-state-selected",function(e){e.preventDefault()}).on(r+x,n,function(){e(this).addClass(L)}).on("mouseleave"+x,n,function(){e(this).removeClass(L)}).on(H+x,n,k(t._click,t)).on("dblclick"+x,".k-in:not(.k-state-disabled)",k(t._toggleButtonClick,t)).on(H+x,".k-plus,.k-minus",k(t._toggleButtonClick,t)).on("keydown"+x,k(t._keydown,t)).on("focus"+x,k(t._focus,t)).on("blur"+x,k(t._blur,t)).on("mousedown"+x,".k-in,.k-checkbox :checkbox",k(t._mousedown,t)).on("change"+x,".k-checkbox :checkbox",k(t._checkboxChange,t)).on("click"+x,".k-checkbox :checkbox",k(t._checkboxClick,t)).on("click"+x,function(){t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data("indeterminate")&&(n.data("indeterminate",!1).prop("indeterminate",!1).prop(T,!0),this._checkboxChange(t))},_attachUids:function(t,n){var r,i=this,a=c.attr("uid");t=t||i.root,n=n||i.dataSource,r=n.view(),t.children("li").each(function(t,n){n=e(n).attr(a,r[t].uid),n.attr("role","treeitem"),i._attachUids(n.children("ul"),r[t].children)})},_animation:function(){var e=this.options,t=e.animation;t===!1?t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}:t.collapse&&"effects"in t.collapse||(t.collapse=h({reverse:!0},t.expand)),h(t.collapse,{hide:!0}),e.animation=t},_templates:function(){var e=this,t=e.options,n=k(e._fieldAccessor,e);t.template&&"string"==typeof t.template?t.template=f(t.template):t.template||(t.template=f("# var text = "+n("text")+"(item); #"+"# if (typeof item.encoded != 'undefined' && item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #")),e._checkboxes(),e.templates={wrapperCssClass:function(e,t){var n="k-item",r=t.index;return e.firstLevel&&0===r&&(n+=" k-first"),r==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",r=t.index,i=e.length-1;return e.firstLevel&&0===r&&(n+="k-top "),n+=0===r&&r!=i?"k-top":r==i?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return t+=e.expanded!==!0?" k-plus":" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:f("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status'></span>#= text #</div>"),group:f("<ul class='#= r.groupCssClass(group) #'#= r.groupAttributes(group) # role='group'>#= renderItems(data) #</ul>"),itemContent:f("# var imageUrl = "+n("imageUrl")+"(item); #"+"# var spriteCssClass = "+n("spriteCssClass")+"(item); #"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #'>"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #'></span>"+"# } #"+"#= treeview.template(data) #"),itemElement:f("# var url = "+n("url")+"(item); #"+"<div class='#= r.cssClass(group, item) #'>"+"# if (item.hasChildren) { #"+"<span class='#= r.toggleButtonClass(item) #' role='presentation'></span>"+"# } #"+"# if (treeview.checkboxes) { #"+"<span class='k-checkbox' role='presentation'>"+"#= treeview.checkboxes.template(data) #"+"</span>"+"# } #"+"# var tag = url ? 'a' : 'span'; #"+"# var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #"+"<#=tag#  class='#= r.textClass(item) #'#= textAttr #>"+"#= r.itemContent(data) #"+"</#=tag#>"+"</div>"),item:f("<li role='treeitem' class='#= r.wrapperCssClass(group, item) #' "+c.attr("uid")+"='#= item.uid #'"+"#=item.selected ? \"aria-selected='true'\" : ''#"+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+">"+"#= r.itemElement(data) #"+"</li>"),loading:f("<div class='k-icon k-loading' /> Loading...")}},items:function(){return this.element.find(".k-item")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},_dataSource:function(e){function t(e){for(var n=0;e.length>n;n++)e[n]._initChildren(),e[n].children.fetch(),t(e[n].children.view())}var n=this,r=n.options,i=r.dataSource;i=g(i)?{data:i}:i,n.dataSource&&n._refreshHandler?n.dataSource.unbind(y,n._refreshHandler):n._refreshHandler=k(n.refresh,n),i.fields||(i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=v.create(i),e&&(n.dataSource.fetch(),t(n.dataSource.view())),n.dataSource.bind(y,n._refreshHandler)},events:[N,A,B,I,U,w,S,b,C],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},dragAndDrop:!1,checkboxes:!1,autoBind:!0,loadOnDemand:!0,template:""},_accessors:function(){var e,t,n,r=this,i=r.options,a=r.element;for(e in q)t=i[q[e]],n=a.attr(c.attr(e+"-field")),n&&(t=n),t||(t=e),g(t)||(t=[t]),i[q[e]]=t},_fieldAccessor:function(t){var n=this.options[q[t]],r=n.length,i="(function(item) {";return 0===r?i+="return item['"+t+"'];":(i+="var level = item.level();var levels = ["+e.map(n,function(e){return"function(d){ return "+c.expr(e)+"}"}).join(",")+"];",i+="return levels[Math.min(level, "+r+"-1)](item)"),i+="})"},setOptions:function(e){var t=this;"dragAndDrop"in e&&e.dragAndDrop&&!t.options.dragAndDrop&&(t.dragging=new a(t)),m.fn.setOptions.call(t,e),t._animation(),t._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(M)[0]})},_updateIndeterminate:function(e){var t,n,i=e.parent().closest(M),a=!0;if(i.length){for(t=r(e.siblings().andSelf()),n=1;t.length>n;n++)if(t[n].checked!=t[n-1].checked||t[n].indeterminate||t[n-1].indeterminate){a=!1;break}r(i).data("indeterminate",!a).prop("indeterminate",!a).prop(T,a&&t[0].checked),this._updateIndeterminate(i)}},_checkboxChange:function(t){var n=e(t.target),r=n.prop(T),i=n.closest(M),a=this;a.options.checkboxes.checkChildren?(i.find(":checkbox").each(function(){a.dataItem(this).set(T,r)}),a._updateIndeterminate(i)):a.dataItem(i).set(T,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(M))},_mousedown:function(t){this._clickTarget=e(t.currentTarget).closest(M)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(){var t=this.select();this._focusable(t)||(t=this._clickTarget),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t)},focus:function(){this.wrapper.focus()},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){return e(t).parent().closest(M)},_nextVisible:function(e){var t,n=this,r=n._expanded(e);if(e.length&&e.is(":visible"))if(r)t=o(e).children().first();else{for(;e.length&&!e.next().length;)e=n.parent(e);t=e.next().length?e.next():e}else t=n.root.children().eq(0);return n._enabled(t)||(t=n._nextVisible(t)),t},_previousVisible:function(e){var t,n=this;if(!e.length||e.prev().length)for(t=e.length?e.prev():n.root.children().last();n._expanded(t);)t=o(t).children().last();else t=n.parent(e)||e;return n._enabled(t)||(t=n._previousVisible(t)),t},_keydown:function(n){var r,i=this,a=n.keyCode,s=i.current(),o=i._expanded(s),d=s.find(":checkbox:first"),l=c.support.isRtl(i.element);n.target==n.currentTarget&&(!l&&a==_.RIGHT||l&&a==_.LEFT?o?r=i._nextVisible(s):i.expand(s):!l&&a==_.LEFT||l&&a==_.RIGHT?o?i.collapse(s):(r=i.parent(s),i._enabled(r)||(r=t)):a==_.DOWN?r=i._nextVisible(s):a==_.UP?r=i._previousVisible(s):a==_.HOME?r=i._nextVisible(e()):a==_.END?r=i._previousVisible(e()):a==_.ENTER?s.find(".k-in:first").hasClass("k-state-selected")||i._trigger(b,s)||i.select(s):a==_.SPACEBAR&&d.length&&(d.prop(T,!d.prop(T)).data("indeterminate",!1).prop("indeterminate",!1),i._checkboxChange({target:d}),r=s),r&&(n.preventDefault(),s[0]!=r[0]&&(i._trigger(C,r),i.current(r))))},_click:function(t){var n,r=this,i=e(t.target),a=d(i.closest(M)),s=i.attr("href");n=s?"#"==s||s.indexOf("#"+this.element.id+"-")>=0:a.length&&!a.children().length,n&&t.preventDefault(),i.hasClass(".k-state-selected")||r._trigger(b,i)||r.select(i)},_wrapper:function(){var e,t,n=this,r=n.element,i="k-widget k-treeview";r.is("div")?(e=r,t=e.children("ul").eq(0)):(e=r.wrap("<div />").parent(),t=r),n.wrapper=e.addClass(i),n.root=t},_group:function(e){var t=this,n=e.hasClass(O),r={firstLevel:n,expanded:n||t._expanded(e)},i=e.children("ul");i.addClass(t.templates.groupCssClass(r)).css("display",r.expanded?"":"none"),t._nodes(i,r)},_nodes:function(t,n){var r,a=this,s=t.children("li");n=h({length:s.length},n),s.each(function(t,s){s=e(s),r={index:t,expanded:a._expanded(s)},i(s),a._updateNodeClasses(s,n,r),a._group(s)})},_checkboxes:function(){var e,t=this.options,n=t.checkboxes;(n||t.checkboxTemplate)&&(t.checkboxTemplate?e=t.checkboxTemplate:(e="<input type='checkbox' #= item.checked ? 'checked' : '' #",n.name&&(e+=" name='"+n.name+"'"),e+=" />"),n=h({template:e},t.checkboxes),"string"==typeof n.template&&(n.template=f(n.template)),t.checkboxes=n)},_updateNodeClasses:function(e,t,n){var r=e.children("div"),i=e.children("ul"),a=this.templates;e.hasClass("k-treeview")||(n=n||{},n.expanded=typeof n.expanded!=V?n.expanded:this._expanded(e),n.index=typeof n.index!=V?n.index:e.index(),n.enabled=typeof n.enabled!=V?n.enabled:!r.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=V?t.firstLevel:e.parent().parent().hasClass(O),t.length=typeof t.length!=V?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(a.wrapperCssClass(t,n)),r.removeClass("k-top k-mid k-bot").addClass(a.cssClass(t,n)),r.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(a.textClass(n)),(i.length||"true"==e.attr("data-hasChildren"))&&(r.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(a.toggleButtonClass(n)),i.addClass("k-group")))},_processNodes:function(t,n){var r=this;r.element.find(t).each(function(t,i){n.call(r,t,e(i).closest(M))})},dataItem:function(t){var n=e(t).closest(M).attr(c.attr("uid")),r=this.dataSource;return r&&r.getByUid(n)},_insertNode:function(t,n,r,a,s){var d,l,c,u,p=this,h=o(r),f=h.children().length+1,g={firstLevel:r.hasClass(O),expanded:!s,length:f},m="",v=function(e,t){e.appendTo(t)};for(c=0;t.length>c;c++)u=t[c],u.index=n+c,m+=p._renderItem({group:g,item:u});if(l=e(m),l.length){for(h.length||(h=e(p._renderGroup({group:g})).appendTo(r)),a(l,h),r.hasClass("k-item")&&(i(r),p._updateNodeClasses(r)),p._updateNodeClasses(l.prev().first()),p._updateNodeClasses(l.next().last()),c=0;t.length>c;c++)u=t[c],u.hasChildren&&(d=u.children.data(),d.length&&p._insertNode(d,u.index,l.eq(c),v,!p._expanded(l.eq(c))));return l}},_updateNode:function(t,n){var r,i,a,s=this,o={treeview:s.options,item:a};if("selected"==t)a=n[0],i=s.findByUid(a.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",a[t]).end(),a[t]?(s.current(i),i.attr(j,!0)):i.attr(j,!1);else for(r=0;n.length>r;r++)o.item=a=n[r],"spriteCssClass"==t||"imageUrl"==t||e.inArray(t,s.options.dataTextField)>=0?s.findByUid(a.uid).find(">div>.k-in").html(s.templates.itemContent(o)):t==T?(i=s.findByUid(a.uid),i.children("div").find(":checkbox").prop(T,a[t]).data("indeterminate",!1).prop("indeterminate",!1)):"expanded"==t&&s._toggle(s.findByUid(a.uid),a,a[t])},refresh:function(e){function n(e,t){var n=o(t),r=n.children(),a=!i._expanded(t);typeof c==V&&(c=r.length),i._insertNode(e,c,t,function(e,t){c==r.length?e.appendTo(t):e.insertBefore(r.eq(c))},a),i._expanded(t)&&(i._updateNodeClasses(t),o(t).css("display","block"))}var r,i=this,a=i.wrapper,s=e.node,d=e.action,l=e.items,c=e.index,u=i.options.loadOnDemand;if(e.field)return i._updateNode(e.field,l);for(s&&(a=i.findByUid(s.uid),i._progress(a,!1)),"add"==d?n(l,a):"remove"==d?i._remove(i.findByUid(l[0].uid),!1):s?(o(a).empty(),n(l,a)):i.root=i.wrapper.html(i._renderGroup({items:l,group:{firstLevel:!0,expanded:!0}})).children("ul"),r=0;l.length>r;r++)(!u||l[r].expanded)&&l[r].load();i.trigger(U,{node:s?a:t})},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=2==arguments.length?!!t:!0,this._processNodes(e,function(e,n){var r=!d(n).is(E);n.removeAttr(F),t||(this.collapse(n),r=!0,n.find(".k-in:first").removeClass("k-state-selected"),n.removeAttr(j),n.attr(F,!0)),this._updateNodeClasses(n,{},{enabled:t,expanded:!r})})},current:function(n){var r=this,i=r._current,a=r.element,s=r._ariaId;return arguments.length>0&&n&&n.length?(i&&i.removeAttr("id").find(".k-in:first").removeClass("k-state-focused"),i=r._current=e(n,a).closest(M),i.find(".k-in:first").addClass("k-state-focused"),s&&(r.wrapper.removeAttr("aria-activedescendant"),i.attr("id",s),r.wrapper.attr("aria-activedescendant",s)),t):(i||(i=r._nextVisible(e())),i)},select:function(n){var r=this,i=r.element;return arguments.length?(n=e(n,i).closest(M),n.length&&(i.find(".k-state-selected").each(function(){var e=r.dataItem(this);e.set("selected",!1),delete e.selected}),r.dataItem(n).set("selected",!0)),t):i.find(".k-state-selected").closest(M)},_toggle:function(e,t,n){var r,i=this,a=i.options,s=d(e),o=n?"expand":"collapse",l=a.animation[o];if(!s.data("animating")&&!i._trigger(o,e))if(i._expanded(e,n),r=t&&t.loaded(),r&&s.children().length>0){if(i._updateNodeClasses(e,{},{expanded:n}),s.is(":visible")==n)return;n||s.css("height",s.height()).css("height"),s.kendoStop(!0,!0).kendoAnimate(h({reset:!0},l,{complete:function(){n&&s.css("height","")}}))}else t&&(a.loadOnDemand&&i._progress(e,!0),s.remove(),t.load())},toggle:function(t,n){t=e(t),l(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")&&(1==arguments.length&&(n=!this._expanded(t)),this._expanded(t,n))},destroy:function(){var e=this;m.fn.destroy.call(e),e.element.off(x),e.dragging&&e.dragging.destroy(),c.destroy(e.element)},_expanded:function(e,n){var r=c.attr("expanded"),i=this.dataItem(e);return 1==arguments.length?"true"===e.attr(r)||i&&i.expanded:(d(e).data("animating")||(i&&i.set("expanded",n),n?(e.attr(r,"true"),e.attr("aria-expanded","true")):(e.removeAttr(r),e.attr("aria-expanded","false"))),t)},_progress:function(e,t){var n=this.element;1==arguments.length?(t=e,t?n.html(this.templates.loading):n.empty()):l(e).toggleClass("k-loading",t)},text:function(e,n){var r=this.dataItem(e),i=this.options[q.text],a=r.level(),s=i.length,o=i[Math.min(a,s-1)];return n?(r.set(o,n),t):r[o]},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,n,r,i){var a,s,o,d,l=this,u=l._objectOrSelf(t),h=l._objectOrSelf(r||n),f=h.dataSource;if(r&&(o=h.dataItem(r),o.loaded()||(h._progress(r,!0),o.load()),r!=l.root&&(f=o.children)),t instanceof window.jQuery||G(t))t=e(t),a=u.dataSource,s=a.getByUid(t.attr(c.attr("uid"))),s&&(s=a.remove(s)),s=i(f,s);else if(g(t)||t instanceof p.ObservableArray)for(d=0;t.length>d;d++)s=i(f,t[d]);else s=i(f,t);return s&&l.findByUid(s.uid)},insertAfter:function(e,t){var n,r=t.parent();return r.parent().is("li")&&(n=r.parent()),this._dataSourceMove(e,r,n,function(e,n){return e.insert(t.index()+1,n)})},insertBefore:function(e,t){var n,r=t.parent();return r.parent().is("li")&&(n=r.parent()),this._dataSourceMove(e,r,n,function(e,n){return e.insert(t.index(),n)})},append:function(e,t){var n=this,r=n.root;return t&&(r=o(t)),n._dataSourceMove(e,r,t,function(e,r){function i(){return t&&n._expanded(t,!0),e.add(r)}return e.data()?i():(e.one(y,i),null)})},_remove:function(t,n){var r,a,s,o=this;return t=e(t,o.element),r=t.parent().parent(),a=t.prev(),s=t.next(),t[n?"detach":"remove"](),r.hasClass("k-item")&&(i(r),o._updateNodeClasses(r)),o._updateNodeClasses(a),o._updateNodeClasses(s),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,r){return e(r).text()==t}).closest(M)},findByUid:function(e){return this.element.find(".k-item["+c.attr("uid")+"="+e+"]")},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",r=0,i=e.items,a=i?i.length:0,s=e.group;for(s.length=a;a>r;r++)e.group=s,e.item=i[r],e.item.index=r,n+=t._renderItem(e);return n},e.r=t.templates,t.templates.group(e)}}),a.prototype={_removeTouchHover:function(){var e=this;c.support.touch&&e.hovered&&(e.hovered.find("."+L).removeClass(L),e.hovered=!1)},_hintStatus:function(n){var r=this._draggable.hint.find(".k-drag-status")[0];return n?(r.className="k-icon k-drag-status "+n,t):e.trim(r.className.replace(/k-(icon|drag-status)/g,""))},dragstart:function(t){var n=this,r=n.treeview,i=n.sourceNode=t.currentTarget.closest(M);r.trigger(N,{sourceNode:i[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(D,"hidden").appendTo(r.element)},drag:function(t){var n,r,i,a,s,o,d,l,u,p,h=this,f=h.treeview,g=h.sourceNode,m=h.dropTarget=e(c.eventTarget(t)),v=m.closest(".k-treeview");v.length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",r=m.closest(".k-top,.k-mid,.k-bot"),r.length?(a=r.outerHeight(),s=r.offset().top,o=m.closest(".k-in"),d=a/(o.length>0?4:2),l=s+d>t.y.location,u=t.y.location>s+a-d,h._removeTouchHover(),p=o.length&&!l&&!u,h.hovered=p?v:!1,h.dropHint.css(D,p?"hidden":"visible"),o.toggleClass(L,p),p?n="k-add":(i=r.position(),i.top+=l?0:a,h.dropHint.css(i)[l?"prependTo":"appendTo"](m.closest(M).children("div:first")),l&&r.hasClass("k-top")&&(n="k-insert-top"),u&&r.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=h.dropHint[0]&&(n="k-denied")):(n="k-denied",h._removeTouchHover()),f.trigger(A,{sourceNode:g[0],dropTarget:m[0],pageY:t.y.location,pageX:t.x.location,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&h.dropHint.css(D,"hidden"),h._hintStatus(n)},dragcancel:function(){this.dropHint.remove()},dragend:function(){var e,n,r,i=this,a=i.treeview,s="over",o=i.sourceNode,d=i.dropHint;return"visible"==d.css(D)?(s=d.prevAll(".k-in").length>0?"after":"before",e=d.closest(M)):i.dropTarget&&(e=i.dropTarget.closest(M)),n="k-denied"!=i._hintStatus(),r=a.trigger(B,{sourceNode:o[0],destinationNode:e[0],valid:n,setValid:function(e){n=e},dropTarget:i.dropTarget[0],dropPosition:s}),d.remove(),i._removeTouchHover(),!n||r?(i._draggable.dropped=n,t):(i._draggable.dropped=!0,"over"==s?o=a.append(o,e):"before"==s?o=a.insertBefore(o,e):"after"==s&&(o=a.insertAfter(o,e)),a.trigger(I,{sourceNode:o&&o[0],destinationNode:e[0],dropPosition:s}),t)},destroy:function(){this._draggable.destroy()}},u.plugin(s)})(window.kendo.jQuery);