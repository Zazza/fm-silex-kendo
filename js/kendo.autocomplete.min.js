/*
* Kendo UI Web v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(e,t){function a(e,t,a){return a?t.substring(0,e).split(a).length-1:0}function s(e,t,s){return t.split(s)[a(e,t,s)]}function r(e,t,s,r){var o=t.split(r);return o.splice(a(e,t,r),1,s),r&&""!==o[o.length-1]&&o.push(""),o.join(r)}function o(e){var t=e.value.length;b(e,t,t)}var n=window.kendo,l=n.support,i=l.placeholder,c=n.ui,p=n.keys,u=n.data.DataSource,d=c.List,h="aria-disabled",_="k-state-default",f="disabled",g="k-state-focused",v="k-state-selected",m="k-state-disabled",C="k-state-hover",y=".kendoAutoComplete",w="mouseenter"+y+" mouseleave"+y,k=d.caret,b=d.selectText,x=e.proxy,S=d.extend({init:function(t,a){var s,r=this;r.ns=y,a=e.isArray(a)?{dataSource:a}:a,d.fn.init.call(r,t,a),t=r.element,a=r.options,a.placeholder=a.placeholder||t.attr("placeholder"),i&&t.attr("placeholder",a.placeholder),r._wrapper(),r._accessors(),r._dataSource(),t[0].type="text",s=r.wrapper,r._popup(),t.addClass("k-input").on("keydown"+y,x(r._keydown,r)).on("paste"+y,x(r._search,r)).on("focus"+y,function(){r._prev=r._accessor(),r._placeholder(!1),s.addClass(g)}).on("blur"+y,function(){r._change(),r._placeholder(),s.removeClass(g)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),r._enable(),r._popup(),r._old=r._accessor(),t[0].id&&t.attr("aria-owns",r.ul[0].id),r._aria(),r._placeholder(),n.notify(r)},options:{name:"AutoComplete",enable:!0,suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{}},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():e._refreshHandler=x(e.refresh,e),e.dataSource=u.create(e.options.dataSource).bind("change",e._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){d.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},enable:function(e){var t=this,a=t.element,s=t.wrapper.off(w);e===!1?(s.removeClass(_).addClass(m),a.attr(f,f).attr(h,!0)):(s.removeClass(m).addClass(_).on(w,t._toggleHover),a.removeAttr(f).attr(h,!1))},close:function(){var e=this;e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(y),e.wrapper.off(y),d.fn.destroy.call(e)},refresh:function(){var a,s=this,r=s.ul[0],o=s.popup,l=s.options,i=s._data(),c=i.length;s.trigger("dataBinding"),r.innerHTML=n.render(s.template,i),s._height(c),o.visible()&&o._position(),c&&(l.highlightFirst&&s.current(e(r.firstChild)),l.suggest&&s.suggest(e(r.firstChild))),s._open&&(s._open=!1,a=c?"open":"close",s._typing&&s.element[0]!==document.activeElement&&(a="close"),o[a](),s._typing=t),s._touchScroller&&s._touchScroller.reset(),s._makeUnselectable(),s.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t,a=this,r=a.options,o=r.ignoreCase,n=r.separator;e=e||a._accessor(),a._current=null,clearTimeout(a._typing),n&&(e=s(k(a.element[0]),e,n)),t=e.length,t?t>=a.options.minLength&&(a._open=!0,a.dataSource.filter({value:o?e.toLowerCase():e,operator:r.filter,field:r.dataTextField,ignoreCase:o})):a.popup.close()},suggest:function(e){var s,r=this,o=r._last,n=r._accessor(),l=r.element[0],i=k(l),c=r.options.separator,u=n.split(c),h=a(i,n,c),_=i;return o==p.BACKSPACE||o==p.DELETE?(r._last=t,t):(e=e||"","string"!=typeof e&&(s=d.inArray(e[0],r.ul[0]),e=s>-1?r._text(r._data()[s]):""),0>=i&&(i=n.toLowerCase().indexOf(e.toLowerCase())+1),s=n.substring(0,i).lastIndexOf(c),s=s>-1?i-(s+c.length):i,n=u[h].substring(0,s),e&&(s=e.toLowerCase().indexOf(n.toLowerCase()),s>-1&&(e=e.substring(s+n.length),_=i+e.length,n+=e),c&&""!==u[u.length-1]&&u.push("")),u[h]=n,r._accessor(u.join(c||"")),b(l,i,_),t)},value:function(e){return e===t?this._accessor():(this._accessor(e),this._old=e,t)},_accessor:function(e){var a=this,s=a.element[0];return e===t?(e=s.value,s.className.indexOf("k-readonly")>-1?e===a.options.placeholder?"":e:e):(s.value=e,a._placeholder(),t)},_accept:function(e){var t=this;t._focus(e),o(t.element[0])},_keydown:function(t){var a=this,s=a.ul[0],r=t.keyCode,o=a._current,n=a.popup.visible();a._last=r,r===p.DOWN?(n&&a._move(o?o.next():e(s.firstChild)),t.preventDefault()):r===p.UP?(n&&a._move(o?o.prev():e(s.lastChild)),t.preventDefault()):r===p.ENTER||r===p.TAB?(r===p.ENTER&&a.popup.visible()&&t.preventDefault(),a._accept(o)):r===p.ESC?(a.popup.visible()&&t.preventDefault(),a.close()):a._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_placeholder:function(e){if(!i){var a,s=this,r=s.element,o=s.options.placeholder;if(o){if(a=r.val(),e===t&&(e=!a),e||(o=a!==o?a:""),a===s._old&&!e)return;r.toggleClass("k-readonly",e).val(o)}}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var a,s,o=this,n=o.options.separator,l=o._data();t=e(t),t[0]&&!t.hasClass(v)&&(s=d.inArray(t[0],o.ul[0]),s>-1&&(l=l[s],a=o._text(l),n&&(a=r(k(o.element[0]),o._accessor(),a,n)),o._accessor(a),o.current(t.addClass(v))))},_toggleHover:function(t){e(t.currentTarget).toggleClass(C,"mouseenter"===t.type)},_wrapper:function(){var e,t=this,a=t.element,s=a[0];e=a.parent(),e.is("span.k-widget")||(e=a.wrap("<span />").parent()),e.attr("tabindex",-1),e.attr("role","presentation"),e[0].style.cssText=s.style.cssText,a.css({width:"100%",height:s.style.height}),t._focused=t.element,t.wrapper=e.addClass("k-widget k-autocomplete k-header").addClass(s.className)}});c.plugin(S)})(window.kendo.jQuery);