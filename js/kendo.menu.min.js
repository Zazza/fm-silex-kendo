/*
* Kendo UI Web v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(e,t){function n(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function i(e,t,n){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",n?"right":"left"],position:["top",n?"right":"left"]},r=/left|right/.test(e);return r?(i.origin=["top",e],i.position[1]=l.directions[e].reverse):(i.origin[0]=e,i.position[0]=l.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function r(t,n){try{return e.contains(t,n)}catch(i){return!1}}function o(t){t=e(t),t.addClass("k-item").children(b).addClass(P),t.children("a").addClass(I).children(b).addClass(P),t.filter(":not([disabled])").addClass(z),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(B).removeAttr("disabled").attr("aria-disabled",!0),t.children("a").filter(":focus").parent().addClass(N),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+I).length||t.contents().filter(function(){return!(this.nodeName.match(_)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+I+"'/>"),a(t),s(t)}function a(t){t=e(t),t.find(".k-icon").remove(),t.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(x+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(D),t.filter(".k-last:not(:last-child)").removeClass(H),t.filter(":first-child").addClass(D),t.filter(":last-child").addClass(H)}var l=window.kendo,d=l.ui,c=l.support.touch&&l.support.mobileOS||l.support.pointers,p=l.support.mousedown,u=l.support.click,m=e.extend,h=e.proxy,f=e.each,g=l.template,v=l.keys,k=d.Widget,_=/^(ul|a|div)$/i,C=".kendoMenu",b="img",w="open",x="k-menu",I="k-link",H="k-last",T="close",y="timer",D="k-first",P="k-image",A="select",O="zIndex",R="mouseenter",U="mouseleave",E="kendoPopup",z="k-state-default",S="k-state-hover",L="k-state-focused",B="k-state-disabled",G=".k-group",N="k-state-active",W=":not(.k-list) > .k-item",j=".k-item.k-state-disabled",M=".k-item:not(.k-state-disabled)",V=".k-item:not(.k-state-disabled) > .k-link",Z="div:not(.k-animation-container,.k-list-container)",$={content:g("<div class='k-content k-group'>#= content(item) #</div>"),group:g("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:g("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:g("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } #</li>"),image:g("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:g("<span class='#= arrowClass(item, group) #'></span>"),sprite:g("<span class='k-sprite #= spriteCssClass #'></span>"),empty:g("")},q={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return n+=t.enabled===!1?" k-state-disabled":" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textClass:function(){return I},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return n+=t.horizontal?" k-i-arrow-s":" k-i-arrow-e"},text:function(e){return e.encoded===!1?e.text:l.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(){return"k-group"},content:function(e){return e.content?e.content:"&nbsp;"}},F=k.extend({init:function(t,n){var i=this;k.fn.init.call(i,t,n),t=i.wrapper=i.element,n=i.options,n.dataSource&&(i.element.empty(),i.append(n.dataSource,t)),i._updateClasses(),n.animation===!1&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),i.nextItemZIndex=100,i._tabindex(),t.on("touchstart",function(t){i.element[0].blur(),i.element[0].focus(),setTimeout(function(){i._moveHover([],e(l.eventTarget(t)).closest(W))},200)}).on("MSPointerDown",function(t){i._oldHoverItem=e(t.target).closest(W)}).on(u+C,j,!1).on(u+C,M,h(i._click,i)).on("keydown"+C,h(i._keydown,i)).on("focus"+C,h(i._focus,i)).on("blur"+C,h(i._removeHoverItem,i)).on(R+C,M,h(i._mouseenter,i)).on(U+C,M,h(i._mouseleave,i)).on(R+C+" "+U+C+" "+p+C+" "+u+C,V,h(i._toggleHover,i)),n.openOnClick&&(i.clicked=!1,i._documentClickHandler=h(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=l.format("{0}_mn_active",t[0].id)),l.notify(i)},events:[w,T,A],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},destroy:function(){var t=this;k.fn.destroy.call(t),t.element.off(C),t._documentClickHandler&&e(document).unbind(t._documentClickHandler)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.length?n.find("> .k-group, .k-animation-container > .k-group"):null);return f(i.items,function(t){i.group.append(this);var n=i.contents[t];n&&e(this).append(n),a(this)}),a(n),s(i.group.find(".k-first, .k-last").add(i.items)),this},insertBefore:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return f(i.items,function(t){n.before(this);var r=i.contents[t];r&&e(this).append(r),a(this),s(this)}),s(n),this},insertAfter:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return f(i.items,function(t){n.after(this);var r=i.contents[t];r&&e(this).append(r),a(this),s(this)}),s(n),this},_insert:function(t,n,i){var r,a,s=this,l=[];n&&n.length||(i=s.element);var d=e.isPlainObject(t),c={firstLevel:i.hasClass(x),horizontal:i.hasClass(x+"-horizontal"),expanded:!0,length:i.children().length};return n&&!i.length&&(i=e(F.renderGroup({group:c})).appendTo(n)),d||e.isArray(t)?(r=e.map(d?[t]:t,function(t,n){return"string"==typeof t?e(t):e(F.renderItem({group:c,item:m(t,{index:n})}))}),l=e.map(d?[t]:t,function(t,n){return t.content||t.contentUrl?e(F.renderContent({item:m(t,{index:n})})):!1})):(r=e(t),a=r.find("> ul").addClass("k-group").attr("role","menu"),r=r.filter("li"),r.add(a.find("> li")).each(function(){o(this)})),{items:r,group:i,contents:l}},remove:function(e){e=this.element.find(e);var t=this,n=e.parentsUntil(t.element,W),i=e.parent("ul");if(e.remove(),i&&!i.children(W).length){var r=i.parent(".k-animation-container");r.length?r.remove():i.remove()}return n.length&&(n=n.eq(0),a(n),s(n)),t},open:function(r){var o=this,a=o.options,s="horizontal"==a.orientation,d=a.direction,c=l.support.isRtl(o.wrapper);return r=o.element.find(r),/^(top|bottom|default)$/.test(d)&&(d=c?s?(d+" left").replace("default","bottom"):"left":s?(d+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var r=e(this);clearTimeout(r.data(y)),r.data(y,setTimeout(function(){var e,l=r.find(".k-group:first:hidden");if(l[0]&&o.trigger(w,{item:r[0]})===!1){r.data(O,r.css(O)),r.css(O,o.nextItemZIndex++),e=l.data(E);var p=r.parent().hasClass(x),u=p&&s,h=i(d,p,c),f=a.animation.open.effects,g=f!==t?f:"slideIn:"+n(d,p);e?(e=l.data(E),e.options.origin=h.origin,e.options.position=h.position,e.options.animation.open.effects=g):e=l.kendoPopup({origin:h.origin,position:h.position,collision:a.popupCollision!==t?a.popupCollision:u?"fit":"fit flip",anchor:r,appendTo:r,animation:{open:m(!0,{effects:g},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();o.trigger(T,{item:t[0]})?e.preventDefault():(t.css(O,t.data(O)),t.removeData(O))}}).data(E),l.removeAttr("aria-hidden"),e.open()}},o.options.hoverDelay))}),o},close:function(t){var n=this,i=n.element;return t=i.find(t),t.length||(t=i.find(">.k-item")),t.each(function(){var t=e(this);clearTimeout(t.data(y)),t.data(y,setTimeout(function(){var e=t.find(".k-group:first:visible").data(E);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(z,n).toggleClass(B,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var n=e(l.eventTarget(t)||t.target).closest(W),i=t.type==R||-1!==p.indexOf(t.type);n.parents("li."+B).length||n.toggleClass(S,i),this._removeHoverItem()},_removeHoverItem:function(){var e=this._oldHoverItem;e&&e.hasClass(L)&&(e.removeClass(L),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.addClass("k-widget k-reset k-header "+x).addClass(x+"-"+this.options.orientation),t.find("li > ul").addClass("k-group").attr("role","menu").attr("aria-hidden",t.is(":visible")),e=t.find("> li,.k-group > li"),e.each(function(){o(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),o=i.children(".k-animation-container").length||i.children(G).length;t.delegateTarget==i.parents(".k-menu")[0]&&((!n.options.openOnClick||n.clicked)&&!r(t.currentTarget,t.relatedTarget)&&o&&n.open(i),(n.options.openOnClick&&n.clicked||c)&&i.siblings().each(h(function(e,t){n.close(t)},n)))},_mouseleave:function(n){var i=this,o=e(n.currentTarget),a=o.children(".k-animation-container").length||o.children(G).length;return o.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?(n.stopImmediatePropagation(),t):(i.options.openOnClick||c||r(n.currentTarget,n.relatedTarget)||!a||i.close(o),t)},_click:function(n){var i,r,o,a=this,s=a.options,d=e(l.eventTarget(n)),c=d[0]?d[0].nodeName.toUpperCase():"",p="INPUT"==c||"SELECT"==c||"BUTTON"==c,u=d.closest("."+I),m=d.closest(W),h=u.attr("href"),f=!!h&&"#"!=h.charAt(h.length-1);if(!m.children(Z)[0])return m.hasClass(B)?(n.preventDefault(),t):(n.handled||!a.trigger(A,{item:m[0]})||p||n.preventDefault(),n.handled=!0,r=m.children(G+",.k-animation-container"),o=r.is(":visible"),s.closeOnClick&&!f&&(!r.length||s.openOnClick&&o)?(m.removeClass(S).css("height"),a._oldHoverItem=a._findRootParent(m),a.close(u.parentsUntil(a.element,W)),a.clicked=!1,-1!="touchend MSPointerUp".indexOf(n.type)&&n.preventDefault(),t):((m.parent().hasClass(x)&&s.openOnClick||l.support.touch)&&(f||p||n.preventDefault(),a.clicked=!0,i=r.is(":visible")?T:w,a[i](m)),t))},_documentClick:function(e){r(this.element[0],e.target)||(this.clicked=!1)},_focus:function(e){var t=this,n=e.target,i=t._hoverItem();n==t.wrapper[0]&&i.length?t._moveHover([],i):n!=t.wrapper[0]||t._oldHoverItem||t._moveHover([],t.wrapper.children().first())},_keydown:function(e){var n,i,r,o=this,a=e.keyCode,s=o._oldHoverItem,d=l.support.isRtl(o.wrapper);if(e.target==e.currentTarget||a==v.ESC){if(s||(s=o._oldHoverItem=o._hoverItem()),i=o._itemBelongsToVertival(s),r=o._itemHasChildren(s),a==v.RIGHT)n=o[d?"_itemLeft":"_itemRight"](s,i,r);else if(a==v.LEFT)n=o[d?"_itemRight":"_itemLeft"](s,i,r);else if(a==v.DOWN)n=o._itemDown(s,i,r);else if(a==v.UP)n=o._itemUp(s,i,r);else if(a==v.ESC)n=o._itemEsc(s,i);else if(a==v.ENTER||a==v.SPACEBAR)n=s.children(".k-link"),n.length>0&&(o._click({target:n[0],preventDefault:function(){}}),o._moveHover(s,o._findRootParent(s)));else if(a==v.TAB)return n=o._findRootParent(s),o.close(n),o._moveHover(s,n),t;n&&n[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find("li.k-item.k-state-hover").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-group, div.k-animation-container").length>0:!1},_moveHover:function(e,t){var n=this,i=n._ariaId;e.length&&t.length&&(e.removeClass(L),e[0].id===i&&e.removeAttr("id")),t.length&&(t[0].id&&(i=t[0].id),t.addClass(L),n._oldHoverItem=t,i&&(n.element.removeAttr("aria-activedescendant"),t.attr("id",i),n.element.attr("aria-activedescendant",i)))},_findRootParent:function(e){return e.parent().hasClass("k-menu")?e:e.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass("k-menu")},_itemRight:function(e,t,n){var i,r,o=this;return t?n?(o.open(e),i=e.find(".k-group").children().first()):"horizontal"==o.options.orientation&&(r=o._findRootParent(e),o.close(r),i=r.next(),i.is(".k-separator")&&(i=i.next())):(i=e.next(),i.is(".k-separator")&&(i=i.next()),i.length||(i=e.parent().children().first())),i&&!i.length?i=o.wrapper.children(".k-item").first():i||(i=[]),o._moveHover(e,i),i},_itemLeft:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._isRootItem(n)&&"horizontal"==i.options.orientation&&(n=n.prev(),n.is(".k-separator")&&(n=n.prev()))):(n=e.prev(),n.is(".k-separator")&&(n=n.prev()),n.length||(n=e.parent().children().last())),n.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemDown:function(e,t,n){var i,r=this;if(t)i=e.next(),i.is(".k-separator")&&(i=i.next());else{if(!n||e.hasClass(B))return;r.open(e),i=e.find(".k-group").children().first()}return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t){var n,i=this;if(t)return n=e.prev(),n.is(".k-separator")&&(n=n.prev()),!n.length&&e.length?n=e.parent().children().last():e.length||(n=i.wrapper.children(".k-item").last()),i._moveHover(e,n),n},_itemEsc:function(e,t){var n,i=this;return t?(n=e.parent().closest(".k-item"),i.close(n),i._moveHover(e,n),n):e}});m(F,{renderItem:function(e){e=m({menu:{},group:{}},e);var t=$.empty,n=e.item;return $.item(m(e,{image:n.imageUrl?$.image:t,sprite:n.spriteCssClass?$.sprite:t,itemWrapper:$.itemWrapper,arrow:n.items||n.content?$.arrow:t,subGroup:F.renderGroup},q))},renderGroup:function(e){return $.group(m({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,o=m({length:r},e.group);r>n;n++)t+=F.renderItem(m(e,{group:o,item:m({index:n},i[n])}));return t}},e,q))},renderContent:function(e){return $.content(m(e,q))}}),l.ui.plugin(F)})(window.kendo.jQuery);