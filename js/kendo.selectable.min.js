/*
* Kendo UI Web v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(e){var t=window.kendo,s=t.support.touch,n=t.ui.Widget,i=e.proxy,o=s?"touchend":"mouseup",a=s?"touchstart":"mousedown",l=s?"touchmove":"mousemove",r="k-state-selected",d="k-state-selecting",u="k-selectable",c="selectstart",f=e(document),h="change",m=".kendoSelectable",p="k-state-unselecting",_=!1;(function(e){(function(){e('<div class="parent"><span /></div>').on("click",">*",function(){_=!0}).find("span").click()})()})(e);var g=n.extend({init:function(t,s){var o=this;n.fn.init.call(o,t,s),o._marquee=e("<div class='k-marquee'></div>"),o._lastActive=null,o._moveDelegate=i(o._move,o),o._upDelegate=i(o._up,o),o.element.addClass(u),o.element.on(a+m,(_?"":"."+u+" ")+o.options.filter,i(o._down,o))},events:[h],options:{name:"Selectable",filter:">*",multiple:!1},_collide:function(e,t){var s=e.offset(),n={left:s.left,top:s.top,right:s.left+e.outerWidth(),bottom:s.top+e.outerHeight()};return!(n.left>t.right||t.left>n.right||n.top>t.bottom||t.top>n.bottom)},_position:function(e){var t,s=this._originalPosition,n=s.x,i=s.y,o=e.pageX,a=e.pageY;return n>o&&(t=o,o=n,n=t),i>a&&(t=a,a=i,i=t),{top:i,right:o,left:n,bottom:a}},_down:function(s){var n,i=this,a=s.ctrlKey,h=s.shiftKey,m=!i.options.multiple;i._downTarget=e(s.currentTarget),i._shiftPressed=h,i._downTarget.closest("."+u)[0]===i.element[0]&&(f.unbind(o,i._upDelegate).bind(o,i._upDelegate),i._originalPosition={x:s.pageX,y:s.pageY},!m&&e(s.target).is(":not(:input, a)")&&(f.unbind(l,i._moveDelegate).bind(l,i._moveDelegate).unbind(c,!1).bind(c,!1),t.support.touch||s.preventDefault()),m||(e("body").append(i._marquee),i._marquee.css({left:s.clientX+1,top:s.clientY+1,width:0,height:0})),n=i._downTarget.hasClass(r),(m||!a&&!h)&&i.element.find(i.options.filter+"."+r).not(i._downTarget).removeClass(r),a&&(i._lastActive=i._downTarget),n&&(a||h)?(i._downTarget.addClass(r),h||i._downTarget.addClass(p)):t.support.touch&&m||(i._downTarget.addClass(d),m&&i._downTarget.hasClass(r)&&i._downTarget.removeClass(d)))},_move:function(t){var s,n,i=this,o=i._position(t),a=t.ctrlKey;i._marquee.css({left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top}),i.element.find(i.options.filter).each(function(){s=e(this),n=i._collide(s,o),n?s.hasClass(r)?i._downTarget[0]!==s[0]&&a&&s.removeClass(r).addClass(p):s.hasClass(d)||s.hasClass(p)||s.addClass(d):s.hasClass(d)?s.removeClass(d):a&&s.hasClass(p)&&s.removeClass(p).addClass(r)})},_up:function(){var e=this,s=e.options,n=!s.multiple;f.unbind(c,!1).unbind(l,e._moveDelegate).unbind(o,e._upDelegate),n||e._marquee.remove(),t.support.touch&&n&&e._downTarget.addClass(d),n||e._shiftPressed!==!0?(e.element.find(s.filter+"."+p).removeClass(p).removeClass(r),e.value(e.element.find(s.filter+"."+d))):e.selectRange(e._firstSelectee(),e._downTarget),e._shiftPressed||(e._lastActive=e._downTarget),e._downTarget=null,e._shiftPressed=!1},value:function(e){var t=this,s=i(t._selectElement,t);return e?(e.each(function(){s(this)}),t.trigger(h,{}),undefined):t.element.find(t.options.filter+"."+r)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter))},_selectElement:function(t){var s=e(t),n=this.trigger("select",{element:t});s.removeClass(d),n||(s.addClass(r),this.options.aria&&s.attr("aria-selected",!0))},clear:function(){var e=this;e.element.find(e.options.filter+"."+r).removeClass(r),e.options.aria&&e.element.children("[aria-selected=true]").attr("aria-selected",!1)},selectRange:function(t,s){var n,o=this,a=!1,l=i(o._selectElement,o);t=e(t)[0],s=e(s)[0],o.element.find(o.options.filter).each(function(){if(n=e(this),a)l(this),a=this!==s;else if(this===t)a=t!==s,l(this);else if(this===s){var i=t;t=s,s=i,a=!0,l(this)}else n.removeClass(r)}),o.trigger(h,{})},destroy:function(){var e=this;n.fn.destroy.call(e),e.element.off(m)}});t.ui.plugin(g)})(window.kendo.jQuery);